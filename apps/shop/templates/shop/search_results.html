{% extends "shop/base.html" %}
{% load shop_tags i18n %}

{% block title %}Search Results{% endblock %}

{% block main %}
{% if not query %}
<p>Please enter a search query</p>
{% else %}
<p>
	{% ifequal results.paginator.count 0 %}
	No products were found matching your query: <em>{{ query }}</em>
	{% else %}
	Showing {{ results.start_index }} to {{ results.end_index }} of
	{{ results.paginator.count }} products matching your query: <em>{{ query }}</em>
	{% endifequal %}
</p>
<ul id="search-results">
	{% for product in results.object_list %}
	<li>
		<div class="img">
			{% if product.image %}
			<a href="{{ product.get_absolute_url }}"><img 
				src="{{ MEDIA_URL }}{% thumbnail product.image 64 64 %}" /></a>
			{% endif %}
		</div>
		<p><a href="{{ product.get_absolute_url }}">{{ product }}</a><br />
			{{ product.description|striptags|truncatewords:20 }}</p>
	</li>
	{% endfor %}
</ul>
{% ifnotequal results.paginator.num_pages 1 %}
<ul class="paging">
	{% if results.has_previous %}
	<a href="?page={{ results.previous_page_number }}&query={{ query|urlencode }}">&lt;</a>
	{% endif %}
	{% for page in results.paginator.page_range %}
	<li>
		{% ifequal page results.number %}
	   	{{ page }}
		{% else %}
	   	<a href="?page={{ page }}&query={{ query|urlencode }}">{{ page }}</a>
		{% endifequal %}
	</li>
	{% endfor %} 
	{% if results.has_next %}
	<a href="?page={{ results.next_page_number }}&query={{ query|urlencode }}">&gt;</a>
	{% endif %}
</ul>
{% endifnotequal %}

{% endif %}
{% endblock %}

